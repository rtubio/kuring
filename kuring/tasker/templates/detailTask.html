{% extends 'dashboard.html' %}
{% load bootstrap4 %}
{% load icons %}
{% load taskertags %}
{% load static %}

{% block content %}

{% include 'partial/confirmDelete.html' %}
{% include 'partial/confirmRun.html' %}
{% include 'partial/confirmStop.html' %}
{% include 'partial/connectionLost.html' %}
{% include 'partial/taskFinished.html' %}

<div class="invisible" id="taskId">{{ object.pk }}</div>

<div class="container-sl">
  <div class="row">
    <div class="col-3 bg-secondary text-light">
      <hr/>
      <p class="text-capitalize">{{ object.name }}</p>
      <p class="font-weight-normal">{{ object.created|date:"SHORT_DATETIME_FORMAT" }}</p>
      <p class="font-weight-normal">{{ object.status|status }}</p>
      <hr/>
      <div class="row">
        <div class="col">
          <a id="db-trash" class="nav-link text-light" data-toggle="modal" data-target="#confirmDelete">{% icon 'trash' %}</a>
        </div>
        <div class="col">
          <a id="db-edit" class="nav-link text-light" href="{% url 'updateTask' object.pk %}">{% icon 'edit' %}</a>
        </div>
        <div class="col">
          <p id="db-down" class="nav-link text-light na" href="#">{% icon 'chevron-down' %}</p>
        </div>
      </div>
      <hr/>

    {% block controls %}

      <div class="row">
        {% if object.status == 'N' %}
          {% include 'partial/controls/new.html' %}
        {% elif object.status == 'R' or object.status == 'P' %}
          {% include 'partial/controls/running.html' %}
        {% else %}
          {% include 'partial/controls/finalized.html' %}
        {% endif %}
      </div>

    {% endblock %}

      <hr/>

      <div class="row">
        <div class="col-6"><p>ws status: </p></div>
        <div class="col-6"><p id="wsStatus"></p></div>
      </div>

      <div class="row"><div class="col"><div class="form-group mb-0">
        <textarea
          id="console" rows="20"
          class="form-control bg-secondary border-secondary text-light" style="font-size: 80%;">
        </textarea>
      </div></div></div>

      <hr/>

    </div>
    <div class="col-9 bg-light"><div class="row p-2"><div class="col">
      <div id="graph1" style="width: 100%; height: 800px;">
    </div></div></div>

  </div>
</div>

<script type="text/javascript" src="{% static 'plotly.js'%}"></script>
<script type="text/javascript" src="{% static 'control.js' %}"></script>

{% endblock %}
